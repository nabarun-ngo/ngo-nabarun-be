<div class="donation-section my-5 py-5 scroll-margin" th:fragment="donate" id="donate">
    <div class="container">
        <!-- Section Header -->
        <div class="text-center mx-auto mb-5 wow fadeInUp" data-wow-delay="0.1s" style="max-width: 700px;">
            <div class="d-inline-block rounded-pill bg-gradient-accent text-white py-2 px-4 mb-3">
                <i class="fas fa-donate me-2"></i>Make a Donation
            </div>
            <h1 class="display-5 mb-4 text-dark">Every Contribution Creates Hope</h1>
            <p class="lead text-muted">Your generosity directly impacts lives and builds stronger communities. Join thousands of donors in making a meaningful difference.</p>
        </div>
        
        <div class="row g-5 align-items-stretch">
            <!-- Impact Stats & Information -->
            <div class="col-lg-6 wow fadeIn" data-wow-delay="0.1s">
                <div class="donation-info-card h-100">
                    <div class="impact-header mb-4">
                        <h2 class="text-white mb-3">Your Impact in Numbers</h2>
                        <p class="text-white-75 mb-4">See how your contribution directly translates into positive change in our communities.</p>
                    </div>
                    
                    <!-- Impact Grid -->
                    <div class="row g-3 mb-4">
                        <div class="col-md-6">
                            <div class="impact-stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-graduation-cap"></i>
                                </div>
                                <div class="stat-content">
                                    <h3 class="text-white">₹500</h3>
                                    <p class="text-white-75 mb-0">Educates 1 child for a month</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="impact-stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-heartbeat"></i>
                                </div>
                                <div class="stat-content">
                                    <h3 class="text-white">₹1000</h3>
                                    <p class="text-white-75 mb-0">Provides medical care for 5 people</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="impact-stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-tint"></i>
                                </div>
                                <div class="stat-content">
                                    <h3 class="text-white">₹2000</h3>
                                    <p class="text-white-75 mb-0">Clean water access for 1 family</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="impact-stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-home"></i>
                                </div>
                                <div class="stat-content">
                                    <h3 class="text-white">₹5000</h3>
                                    <p class="text-white-75 mb-0">Supports community development</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Trust Indicators -->
                    <div class="trust-indicators">
                        <div class="trust-item d-flex align-items-center mb-3">
                            <div class="trust-icon me-3">
                                <i class="fas fa-shield-alt text-accent"></i>
                            </div>
                            <div>
                                <h6 class="text-white mb-1">100% Transparent</h6>
                                <p class="text-white-75 mb-0">Complete visibility into how your money is used</p>
                            </div>
                        </div>
                        <div class="trust-item d-flex align-items-center mb-3">
                            <div class="trust-icon me-3">
                                <i class="fas fa-certificate text-accent"></i>
                            </div>
                            <div>
                                <h6 class="text-white mb-1">Verified NGO</h6>
                                <p class="text-white-75 mb-0">Registered and certified charitable organization</p>
                            </div>
                        </div>
                        <div class="trust-item d-flex align-items-center">
                            <div class="trust-icon me-3">
                                <i class="fas fa-users text-accent"></i>
                            </div>
                            <div>
                                <h6 class="text-white mb-1">Community Driven</h6>
                                <p class="text-white-75 mb-0">Supported by thousands of generous donors</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Donation Form -->
            <div class="col-lg-6 wow fadeIn" data-wow-delay="0.3s">
                <div class="donation-form-card h-100">
                    <div class="form-header mb-4">
                        <h3 class="text-dark mb-2">Make Your Donation</h3>
                        <p class="text-muted">Every rupee counts towards creating positive change</p>
                    </div>
                    
                    <form id="donationForm" th:action="@{/donate}" method="post" th:object="${interview}" autocomplete="off">
                        <input type="hidden" name="X-Cloud-Trace-Context" th:value="${#dates.createNow().getTime()}">
                        
                        <!-- Quick Amount Selection -->
                        <div class="quick-amounts mb-4">
                            <p class="form-label text-dark fw-semibold mb-3">Choose Amount</p>
                            <div class="amount-buttons d-flex flex-wrap gap-2 mb-3">
                                <button type="button" class="amount-btn" data-amount="500">₹500</button>
                                <button type="button" class="amount-btn" data-amount="1000">₹1000</button>
                                <button type="button" class="amount-btn" data-amount="2000">₹2000</button>
                                <button type="button" class="amount-btn" data-amount="5000">₹5000</button>
                                <button type="button" class="amount-btn" data-amount="10000">₹10000</button>
                                <button type="button" class="amount-btn custom-amount">Other</button>
                            </div>
                        </div>
                        
                        <div class="row g-3">
                            <!-- Custom Amount Input -->
                            <div class="col-12">
                                <div class="modern-input-group">
                                    <label for="amount" class="form-label text-dark fw-semibold">
                                        <i class="fas fa-rupee-sign me-2 text-primary"></i>Donation Amount
                                    </label>
                                    <input type="number" class="form-control modern-input" id="amount" 
                                           placeholder="Enter amount in ₹" th:field="*{amount}" min="100">
                                </div>
                            </div>
                            
                            <!-- Personal Information -->
                            <div class="col-12">
                                <div class="modern-input-group">
                                    <label for="name" class="form-label text-dark fw-semibold">
                                        <i class="fas fa-user me-2 text-primary"></i>Full Name
                                    </label>
                                    <input type="text" class="form-control modern-input" th:field="*{firstName}" 
                                           id="name" placeholder="Enter your full name">
                                </div>
                            </div>
                            
                            <div class="col-12">
                                <div class="modern-input-group">
                                    <label for="email" class="form-label text-dark fw-semibold">
                                        <i class="fas fa-envelope me-2 text-primary"></i>Email Address
                                    </label>
                                    <input type="email" class="form-control modern-input" th:field="*{email}" 
                                           id="email" placeholder="your@email.com">
                                </div>
                            </div>
                            
                            <div class="col-md-4">
                                <div class="modern-input-group">
                                    <label for="phonecode" class="form-label text-dark fw-semibold">Code</label>
                                    <select class="form-control modern-input" id="phonecode" th:field="*{dialCode}">
                                        <option value="91" selected>+91</option>
                                        <option value="92">+92</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="col-md-8">
                                <div class="modern-input-group">
                                    <label for="mobileno" class="form-label text-dark fw-semibold">
                                        <i class="fas fa-phone me-2 text-primary"></i>Mobile Number
                                    </label>
                                    <input type="number" class="form-control modern-input" id="mobileno" 
                                           placeholder="Your mobile number" th:field="*{contactNumber}">
                                </div>
                            </div>
                            
                            <input type="hidden" name="actionName" id="actionName" th:value="'SUBMIT_PAYMENT_INFO'">
                            
                            <!-- Submit Button -->
                            <div class="col-12 mt-4">
                                <button type="submit" class="btn btn-primary btn-lg w-100 donation-submit-btn">
                                    <i class="fas fa-heart me-2"></i>Donate Now
                                    <i class="fas fa-arrow-right ms-2"></i>
                                </button>
                                <p class="text-center text-muted mt-2 mb-0">
                                    <i class="fas fa-lock me-1"></i>Secure payment processing
                                </p>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        
        <!-- Donor Testimonials -->
        <div class="donor-testimonials mt-5 pt-5 wow fadeInUp" data-wow-delay="0.5s">
            <div class="text-center mb-5">
                <h3 class="text-dark mb-3">What Our Donors Say</h3>
                <p class="text-muted">Join thousands who have experienced the joy of giving</p>
            </div>
            
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="testimonial-card">
                        <div class="testimonial-content">
                            <p class="text-muted mb-3">"Seeing the direct impact of my donation through their transparent reporting gives me confidence to contribute regularly."</p>
                            <div class="testimonial-author">
                                <div class="author-avatar">
                                    <i class="fas fa-user-circle text-primary"></i>
                                </div>
                                <div>
                                    <h6 class="text-dark mb-0">Priya Sharma</h6>
                                    <small class="text-muted">Regular Donor</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <div class="testimonial-card">
                        <div class="testimonial-content">
                            <p class="text-muted mb-3">"NABARUN's work in our community has been transformational. Proud to support such a dedicated organization."</p>
                            <div class="testimonial-author">
                                <div class="author-avatar">
                                    <i class="fas fa-user-circle text-primary"></i>
                                </div>
                                <div>
                                    <h6 class="text-dark mb-0">Rajesh Kumar</h6>
                                    <small class="text-muted">Corporate Donor</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <div class="testimonial-card">
                        <div class="testimonial-content">
                            <p class="text-muted mb-3">"Every small contribution counts. I've seen children in my village get better education because of this NGO."</p>
                            <div class="testimonial-author">
                                <div class="author-avatar">
                                    <i class="fas fa-user-circle text-primary"></i>
                                </div>
                                <div>
                                    <h6 class="text-dark mb-0">Anita Devi</h6>
                                    <small class="text-muted">Community Member</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container-xxl py-5 scroll-margin" th:fragment="completePayment" id="completepayment"
	th:if="${stage == 'MAKE_PAYMENT'}">
	<div class="container">
		<div class="alert alert-danger" role="alert" th:if="${errorMessage !=null}" th:utext="${errorMessage}"></div>
		<p class="mb-0 alert alert-info" th:if="${successMessage !=null}" th:utext="${successMessage}"></p>

		<div class="row">
			<div class="col-12 mt-4">
				<div class="card p-3">
					<p class="mb-0 fw-bold h4">Payment Methods</p>
				</div>
			</div>
			<div class="col-12" id="accordion">
				<div class="card p-3">
					<div class="card-body border p-0">
						<p id="cardCashHeading">
							<a class="btn btn-primary w-100 h-100 d-flex align-items-center justify-content-between"
								data-bs-toggle="collapse" href="#collapseCash" role="button" aria-expanded="true"
								aria-controls="collapseCash">
								<span class="fw-bold">Cash</span>
							</a>
						</p>
						<div class="collapse p-3 pt-0" id="collapseCash" aria-labelledby="cardCashHeading"
							data-bs-parent="#accordion">
							<div class="row">
								<div class="col-5">
									<div th:replace="fragments/components/donate :: donation_summary"></div>
								</div>
								<div class="col-lg-7">
									<form th:action="@{/donate}" method="post" th:object="${interview}" class="form"
										enctype="multipart/form-data">
										<input type="hidden" name="X-Cloud-Trace-Context"
											th:value="${#dates.createNow().getTime()}">
										<div class="row">
											<div class="col-12 mb-2">
												<p class="h5 mb-2">Please submit this request. Our team will connect you
													to collect your donation.</p>
											</div>
											<input type="hidden" name="actionName" id="actionName"
												th:value="'SUBMIT_REQUEST'">
											<input type="hidden" name="paymentMethod" id="paymentMethod"
												th:value="'CASH'">
											<div class="col-12 mb-2" th:if="${!#lists.isEmpty(interview.accounts)}">
												<button type="submit" class="btn btn-primary w-100">Submit
													Request</button>
											</div>
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>
					<div class="card-body border p-0">
						<p id="cardUpiHeading">
							<a class="btn btn-primary p-2 w-100 h-100 d-flex align-items-center justify-content-between"
								data-bs-toggle="collapse" href="#collapseUPI" role="button" aria-expanded="true"
								aria-controls="collapseUPI">
								<span class="fw-bold">UPI</span>

							</a>
						</p>
						<div class="collapse show p-3 pt-0" id="collapseUPI" aria-labelledby="cardUpiHeading"
							data-bs-parent="#accordion">
							<div class="row">
								<div class="col-lg-5 mb-lg-0 mb-3">
									<div th:replace="fragments/components/donate :: donation_summary"></div>
								</div>
								<div class="col-lg-7">
									<form th:action="@{/donate}" method="post" th:object="${interview}" class="form"
										id="donate_upi" enctype="multipart/form-data">
										<input type="hidden" name="X-Cloud-Trace-Context"
											th:value="${#dates.createNow().getTime()}">
										<div class="row">
											<div class="col-12 mb-2">
												<p class="h5 mb-2">Please scan the QR code(s) to transfer the donation
													amount and confirm payment.</p>
											</div>

											<div class="col-12" th:if="${#lists.isEmpty(interview.accounts)}">
												<div class="alert alert-danger" role="alert"
													th:text="'No account found.'"></div>
											</div>

											<div th:each="item,itemStat : ${interview.accounts}" th:remove="tag">
												<div class="col-12" th:if="item != null">
													<p class="mb-1"><span class="fw-bold">Name :
														</span><span class="c-green"
															th:text="${item.payableUPIDetail.payeeName}"></span>
													</p>
													<p class="mb-1"><span class="fw-bold">Mobile Number : </span><span
															class="c-green"
															th:text="${item.payableUPIDetail.mobileNumber}"></span></p>
													<p class="mb-1"><span class="fw-bold">QR Code : </span><span
															class="c-green">
															<div th:id="'qrcode'+${itemStat.index}"></div>
														</span>
													</p>
													<script th:inline="javascript">

														/*<![CDATA[*/

														var itemId = 'qrcode' + /*[[${itemStat.index}]]*/ '';
														new QRCode(itemId, {
															text: /*[[${item.payableUPIDetail.qrData}]]*/ '',
															width: 128,
															height: 128,
															colorDark: "#000000",
															colorLight: "#ffffff",
															correctLevel: QRCode.CorrectLevel.H
														});
														/*]]>*/
													</script>

													<div class="mb-1">
														<div>
															<input type="checkbox" id="paidToAcc1"
																name="paidToAccountId"
																class="form-check-input check-item-1"
																th:value="${item.id}" />
															<label for="paidToAcc" class="form-check-label "> I have
																successfully paid the donation amount to
																above UPI.</label>
														</div>
													</div>

												</div>
												<div class="col-12 mt-2 mb-2"
													th:if="${#lists.size(interview.accounts)-1 != itemStat.index}">
													<b>OR</b>
												</div>

											</div>
											<div class="mt-1 mb-2">
												<div class="form-floating">
													<input type="file" class="form-control" id="file"
														th:field="*{files}" multiple required> <label for="file">Please select
														any
														supporting files (prefrerably UPI screenshots)</label>
												</div>
											</div>

											<input type="hidden" name="actionName" id="actionName"
												th:value="'CONFIRM_PAYMENT'">
											<input type="hidden" name="paymentMethod" id="paymentMethod"
												th:value="'UPI'">
											<div class="col-12 mb-2" th:if="${!#lists.isEmpty(interview.accounts)}">
												<button type="submit" class="btn btn-primary w-100" id="sub_bt1"
													disabled>Confirm
													Payment</button>
											</div>
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>
					<div class="card-body border p-0">
						<p id="cardBankHeading">
							<a class="btn btn-primary p-2 w-100 h-100 d-flex align-items-center justify-content-between"
								data-bs-toggle="collapse" href="#collapseBank" role="button" aria-expanded="true"
								aria-controls="collapseBank">
								<span class="fw-bold">Bank Account</span>
							</a>
						</p>
						<div class="collapse p-3 pt-0" id="collapseBank" aria-labelledby="cardBankHeading"
							data-bs-parent="#accordion">
							<div class="row">
								<div class="col-lg-5 mb-lg-0 mb-3">
									<div th:replace="fragments/components/donate :: donation_summary"></div>
								</div>
								<div class="col-lg-7">
									<form th:action="@{/donate}" method="post" th:object="${interview}" class="form"
										id="donate_bank" enctype="multipart/form-data">
										<input type="hidden" name="X-Cloud-Trace-Context"
											th:value="${#dates.createNow().getTime()}">
										<div class="row">
											<div class="col-12 mb-2">
												<p class="h5 mb-2">Please transfer the donation amount to below
													account(s) and confirm payment.</p>
											</div>

											<div class="col-12" th:if="${#lists.isEmpty(interview.accounts)}">
												<div class="alert alert-danger" role="alert"
													th:text="'No account found.'"></div>
											</div>

											<div th:each="item,itemStat : ${interview.accounts}" th:remove="tag">
												<div class="col-12">
													<p class="mb-1"><span class="fw-bold">Account Holder Name :
														</span><span class="c-green"
															th:text="${item.payableBankDetails.bankAccountHolderName}"></span>
													</p>
													<p class="mb-1"><span class="fw-bold">Bank Name : </span><span
															class="c-green"
															th:text="${item.payableBankDetails.bankName}"></span></p>
													<p class="mb-1"><span class="fw-bold">Branch Name : </span><span
															class="c-green"
															th:text="${item.payableBankDetails.bankBranch}"></span>
													</p>
													<p class="mb-1"><span class="fw-bold">Account Number : </span><span
															class="c-green"
															th:text="${item.payableBankDetails.bankAccountNumber}"></span>
													</p>
													<p class="mb-1"><span class="fw-bold">IFSC Code : </span><span
															class="c-green"
															th:text="${item.payableBankDetails.IFSCNumber}"></span>
													</p>
												</div>

												<div class="mb-1">
													<div>
														<input type="checkbox" id="paidToAcc2" name="paidToAccountId"
															class="form-check-input check-item-2"
															th:value="${item.id}" />
														<label for="paidToAcc" class="form-check-label"> I have
															successfully paid the donation amount to
															above bank account.</label>
													</div>
												</div>
												<div class="col-12 mt-2 mb-2"
													th:if="${#lists.size(interview.accounts)-1 != itemStat.index}">
													<b>OR</b>
												</div>
											</div>

											<div class="mt-1 mb-2">
												<div class="form-floating">
													<input type="file" class="form-control" id="file"
														th:field="*{files}" multiple required> <label for="file">Please
														select any
														supporting files (prefrerably transaction recipt)</label>
												</div>
											</div>
											<input type="hidden" name="actionName" id="actionName"
												th:value="'CONFIRM_PAYMENT'">
											<input type="hidden" name="paymentMethod" id="paymentMethod"
												th:value="'NETBANKING'">
											<div class="col-12 mb-2" th:if="${!#lists.isEmpty(interview.accounts)}">
												<button type="submit" class="btn btn-primary w-100" id="sub_bt2"
													disabled>Confirm
													Payment</button>
											</div>
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

		</div>
	</div>
</div>


<div th:fragment="donation_summary">
	<p class="h4 mb-2">Donation Summary</p>
	<p class="mb-1"><span class="fw-bold">Donor Name : </span><span class="c-green"
			th:text="${interview.firstName}"></span></p>
	<p class="mb-1"><span class="fw-bold">Donor Email : </span><span class="c-green"
			th:text="${interview.email}"></span></p>
	<p class="mb-1"><span class="fw-bold">Donor Number : </span><span class="c-green"
			th:text="${interview.dialCode}+${interview.contactNumber}"></span>
	</p>
	<p class="mb-1"><span class="fw-bold">Donation Amount : </span><span class="c-green"
			th:text="'₹ '+${interview.amount}"></span></p>
</div>



