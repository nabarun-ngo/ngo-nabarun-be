<div class="donation-section my-5 py-5 scroll-margin" th:fragment="donate" id="donate">
	<div class="container">
		<!-- Section Header -->
		<div class="text-center mx-auto mb-5 wow fadeInUp" data-wow-delay="0.1s" style="max-width: 700px;">
			<div class="d-inline-block rounded-pill bg-gradient-accent text-white py-2 px-4 mb-3">
				<i class="fas fa-donate me-2"></i><span th:text="${content.donate.sectionTitle}"></span>
			</div>
			<h1 class="display-5 mb-4 text-dark" th:text="${content.donate.title}"></h1>
			<p class="lead text-muted" th:text="${content.donate.description}"></p>
		</div>

		<div class="row g-5 align-items-stretch">
			<!-- Impact Stats & Information -->
			<div class="col-lg-6 wow fadeIn" data-wow-delay="0.1s">
				<div class="donation-info-card h-100">
					<div class="impact-header mb-4">
						<h2 class="text-white mb-3" th:text="${content.donate.impact.title}"></h2>
						<p class="text-white-75 mb-4" th:text="${content.donate.impact.description}"></p>
					</div>

					<!-- Impact Grid -->
					<div class="row g-3 mb-4">
						<div class="col-md-6" th:each="stat : ${content.donate.impact.stats}">
							<div class="impact-stat-card">
								<div class="stat-icon">
									<i class="fas fa-graduation-cap"></i>
								</div>
								<div class="stat-content">
									<h3 class="text-white" th:text="${stat.amount}"></h3>
									<p class="text-white-75 mb-0" th:text="${stat.description}"></p>
								</div>
							</div>
						</div>
					</div>

					<!-- Trust Indicators -->
					<div class="trust-indicators">
						<div class="trust-item d-flex align-items-center mb-3"
							th:each="indicator : ${content.donate.trust.indicators}">
							<div class="trust-icon me-3">
								<i class="fas fa-shield-alt text-accent"></i>
							</div>
							<div>
								<h6 class="text-white mb-1" th:text="${indicator.title}"></h6>
								<p class="text-white-75 mb-0" th:text="${indicator.description}"></p>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Donation Form -->
			<div class="col-lg-6 wow fadeIn" data-wow-delay="0.3s">
				<div class="donation-form-card h-100">
					<div class="form-header mb-4">
						<h3 class="text-dark mb-2" th:text="${content.donate.form.title}"></h3>
						<p class="text-muted" th:text="${content.donate.form.description}"></p>
					</div>

					<form id="donationForm" th:action="@{/donate}" method="post" th:object="${interview}"
						autocomplete="off">
						<input type="hidden" name="X-Cloud-Trace-Context" th:value="${#dates.createNow().getTime()}">

						<!-- Quick Amount Selection -->
						<div class="quick-amounts mb-4">
							<p class="form-label text-dark fw-semibold mb-3"
								th:text="${content.donate.form.quickAmountTitle}"></p>
							<div class="amount-buttons d-flex flex-wrap gap-2 mb-3">
								<button type="button" class="amount-btn"
									th:each="amount : ${content.donate.form.quickAmounts}"
									th:data-amount="${#strings.replace(amount, 'â‚¹', '')}" th:text="${amount}"></button>
							</div>
						</div>

						<div class="row g-3">
							<!-- Custom Amount Input -->
							<div class="col-12">
								<div class="modern-input-group">
									<label for="amount" class="form-label text-dark fw-semibold">
										<i class="fas fa-rupee-sign me-2 text-primary"></i><span
											th:text="${content.donate.form.amountLabel}"></span>
									</label>
									<input type="number" class="form-control modern-input" id="amount"
										th:placeholder="${content.donate.form.amountPlaceholder}" th:field="*{amount}"
										min="100">
								</div>
							</div>

							<!-- Personal Information -->
							<div class="col-12">
								<div class="modern-input-group">
									<label for="name" class="form-label text-dark fw-semibold">
										<i class="fas fa-user me-2 text-primary"></i><span
											th:text="${content.donate.form.nameLabel}"></span>
									</label>
									<input type="text" class="form-control modern-input" th:field="*{firstName}"
										id="name" th:placeholder="${content.donate.form.namePlaceholder}">
								</div>
							</div>

							<div class="col-12">
								<div class="modern-input-group">
									<label for="email" class="form-label text-dark fw-semibold">
										<i class="fas fa-envelope me-2 text-primary"></i><span
											th:text="${content.donate.form.emailLabel}"></span>
									</label>
									<input type="email" class="form-control modern-input" th:field="*{email}" id="email"
										th:placeholder="${content.donate.form.emailPlaceholder}">
								</div>
							</div>

							<div class="col-md-4">
								<div class="modern-input-group">
									<label for="phonecode" class="form-label text-dark fw-semibold"
										th:text="${content.donate.form.codeLabel}"></label>
									<select class="form-control modern-input" id="phonecode" th:field="*{dialCode}">
										<option value="91" selected>+91</option>
										<option value="92">+92</option>
									</select>
								</div>
							</div>

							<div class="col-md-8">
								<div class="modern-input-group">
									<label for="mobileno" class="form-label text-dark fw-semibold">
										<i class="fas fa-phone me-2 text-primary"></i><span
											th:text="${content.donate.form.mobileLabel}"></span>
									</label>
									<input type="number" class="form-control modern-input" id="mobileno"
										th:placeholder="${content.donate.form.mobilePlaceholder}"
										th:field="*{contactNumber}">
								</div>
							</div>

							<input type="hidden" name="actionName" id="actionName" th:value="'SUBMIT_PAYMENT_INFO'">

							<!-- Submit Button -->
							<div class="col-12 mt-4">
								<button type="submit" class="btn btn-primary btn-lg w-100 donation-submit-btn">
									<i class="fas fa-heart me-2"></i><span
										th:text="${content.donate.form.submit}"></span>
									<i class="fas fa-arrow-right ms-2"></i>
								</button>
								<p class="text-center text-muted mt-2 mb-0">
									<i class="fas fa-lock me-1"></i><span
										th:text="${content.donate.form.secure}"></span>
								</p>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>

		<!-- Donor Testimonials -->
		<div th:if="${content.donate.testimonials.enabled}" class="donor-testimonials mt-5 pt-5 wow fadeInUp"
			data-wow-delay="0.5s">
			<div class="text-center mb-5">
				<h3 class="text-dark mb-3" th:text="${content.donate.testimonials.title}"></h3>
				<p class="text-muted" th:text="${content.donate.testimonials.description}"></p>
			</div>

			<div class="row g-4">
				<div class="col-md-4" th:each="quote : ${content.donate.testimonials.quotes}">
					<div class="testimonial-card">
						<div class="testimonial-content">
							<p class="text-muted mb-3" th:text="${quote.quote}"></p>
							<div class="testimonial-author">
								<div class="author-avatar">
									<i class="fas fa-user-circle text-primary"></i>
								</div>
								<div>
									<h6 class="text-dark mb-0" th:text="${quote.author}"></h6>
									<small class="text-muted" th:text="${quote.role}"></small>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl py-5 scroll-margin" th:fragment="completePayment" id="completepayment"
	th:if="${stage == 'MAKE_PAYMENT'}">
	<div class="container">
		<div class="alert alert-danger" role="alert" th:if="${errorMessage !=null}" th:utext="${errorMessage}"></div>
		<p class="mb-0 alert alert-info" th:if="${successMessage !=null}" th:utext="${successMessage}"></p>

		<div class="row">
			<div class="col-12 mt-4">
				<div class="card p-3">
					<p class="mb-0 fw-bold h4" th:text="${content.donate.payment.title}"></p>
				</div>
			</div>
			<div class="col-12" id="accordion">
				<div class="card p-3">
					<div class="card-body border p-0">
						<p id="cardCashHeading">
							<a class="btn btn-primary w-100 h-100 d-flex align-items-center justify-content-between"
								data-bs-toggle="collapse" href="#collapseCash" role="button" aria-expanded="true"
								aria-controls="collapseCash">
								<span class="fw-bold" th:text="${content.donate.payment.cash.title}"></span>
							</a>
						</p>
						<div class="collapse p-3 pt-0" id="collapseCash" aria-labelledby="cardCashHeading"
							data-bs-parent="#accordion">
							<div class="row">
								<div class="col-5">
									<div th:replace="fragments/components/donate :: donation_summary"></div>
								</div>
								<div class="col-lg-7">
									<form th:action="@{/donate}" method="post" th:object="${interview}" class="form"
										enctype="multipart/form-data">
										<input type="hidden" name="X-Cloud-Trace-Context"
											th:value="${#dates.createNow().getTime()}">
										<div class="row">
											<div class="col-12 mb-2">
												<p class="h5 mb-2" th:text="${content.donate.payment.cash.description}">
												</p>
											</div>
											<input type="hidden" name="actionName" id="actionName"
												th:value="'SUBMIT_REQUEST'">
											<input type="hidden" name="paymentMethod" id="paymentMethod"
												th:value="'CASH'">
											<div class="col-12 mb-2" th:if="${!#lists.isEmpty(interview.accounts)}">
												<button type="submit" class="btn btn-primary w-100"
													th:text="${content.donate.payment.cash.submit}">
												</button>
											</div>
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>
					<div class="card-body border p-0">
						<p id="cardUpiHeading">
							<a class="btn btn-primary p-2 w-100 h-100 d-flex align-items-center justify-content-between"
								data-bs-toggle="collapse" href="#collapseUPI" role="button" aria-expanded="true"
								aria-controls="collapseUPI">
								<span class="fw-bold" th:text="${content.donate.payment.upi.title}"></span>

							</a>
						</p>
						<div class="collapse show p-3 pt-0" id="collapseUPI" aria-labelledby="cardUpiHeading"
							data-bs-parent="#accordion">
							<div class="row">
								<div class="col-lg-5 mb-lg-0 mb-3">
									<div th:replace="fragments/components/donate :: donation_summary"></div>
								</div>
								<div class="col-lg-7">
									<form th:action="@{/donate}" method="post" th:object="${interview}" class="form"
										id="donate_upi" enctype="multipart/form-data">
										<input type="hidden" name="X-Cloud-Trace-Context"
											th:value="${#dates.createNow().getTime()}">
										<div class="row">
											<div class="col-12 mb-2">
												<p class="h5 mb-2" th:text="${content.donate.payment.upi.description}">
												</p>
											</div>

											<div class="col-12" th:if="${#lists.isEmpty(interview.accounts)}">
												<div class="alert alert-danger" role="alert"
													th:text="'No account found.'"></div>
											</div>

											<div th:each="item,itemStat : ${interview.accounts}" th:remove="tag">
												<div class="col-12" th:if="item != null">
													<p class="mb-1"><span class="fw-bold">Name :
														</span><span class="c-green"
															th:text="${item.payableUPIDetail.payeeName}"></span>
													</p>
													<p class="mb-1"><span class="fw-bold">Mobile Number : </span><span
															class="c-green"
															th:text="${item.payableUPIDetail.mobileNumber}"></span></p>
													<p class="mb-1"><span class="fw-bold">QR Code : </span><span
															class="c-green">
															<div th:id="'qrcode'+${itemStat.index}"></div>
														</span>
													</p>
													<script th:inline="javascript">

														/*<![CDATA[*/

														var itemId = 'qrcode' + /*[[${itemStat.index}]]*/ '';
														new QRCode(itemId, {
															text: /*[[${item.payableUPIDetail.qrData}]]*/ '',
															width: 128,
															height: 128,
															colorDark: "#000000",
															colorLight: "#ffffff",
															correctLevel: QRCode.CorrectLevel.H
														});
														/*]]>*/
													</script>

													<div class="mb-1">
														<div>
															<input type="checkbox" id="paidToAcc1"
																name="paidToAccountId"
																class="form-check-input check-item-1"
																th:value="${item.id}" />
															<label for="paidToAcc" class="form-check-label "
																th:text="${content.donate.payment.upi.paid_confirmation}"></label>
														</div>
													</div>

												</div>
												<div class="col-12 mt-2 mb-2"
													th:if="${#lists.size(interview.accounts)-1 != itemStat.index}">
													<b>OR</b>
												</div>

											</div>
											<div class="mt-1 mb-2">
												<div class="form-floating">
													<input type="file" class="form-control" id="file"
														th:field="*{files}" multiple required> <label for="file"
														th:text="${content.donate.payment.upi.file_label}"></label>
												</div>
											</div>

											<input type="hidden" name="actionName" id="actionName"
												th:value="'CONFIRM_PAYMENT'">
											<input type="hidden" name="paymentMethod" id="paymentMethod"
												th:value="'UPI'">
											<div class="col-12 mb-2" th:if="${!#lists.isEmpty(interview.accounts)}">
												<button type="submit" class="btn btn-primary w-100" id="sub_bt1"
													disabled th:text="${content.donate.payment.upi.submit}"></button>
											</div>
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>
					<div class="card-body border p-0">
						<p id="cardBankHeading">
							<a class="btn btn-primary p-2 w-100 h-100 d-flex align-items-center justify-content-between"
								data-bs-toggle="collapse" href="#collapseBank" role="button" aria-expanded="true"
								aria-controls="collapseBank">
								<span class="fw-bold" th:text="${content.donate.payment.bank.title}"></span>
							</a>
						</p>
						<div class="collapse p-3 pt-0" id="collapseBank" aria-labelledby="cardBankHeading"
							data-bs-parent="#accordion">
							<div class="row">
								<div class="col-lg-5 mb-lg-0 mb-3">
									<div th:replace="fragments/components/donate :: donation_summary"></div>
								</div>
								<div class="col-lg-7">
									<form th:action="@{/donate}" method="post" th:object="${interview}" class="form"
										id="donate_bank" enctype="multipart/form-data">
										<input type="hidden" name="X-Cloud-Trace-Context"
											th:value="${#dates.createNow().getTime()}">
										<div class="row">
											<div class="col-12 mb-2">
												<p class="h5 mb-2" th:text="${content.donate.payment.bank.description}">
												</p>
											</div>

											<div class="col-12" th:if="${#lists.isEmpty(interview.accounts)}">
												<div class="alert alert-danger" role="alert"
													th:text="'No account found.'"></div>
											</div>

											<div th:each="item,itemStat : ${interview.accounts}" th:remove="tag">
												<div class="col-12">
													<p class="mb-1"><span class="fw-bold">Account Holder Name :
														</span><span class="c-green"
															th:text="${item.payableBankDetails.bankAccountHolderName}"></span>
													</p>
													<p class="mb-1"><span class="fw-bold">Bank Name : </span><span
															class="c-green"
															th:text="${item.payableBankDetails.bankName}"></span></p>
													<p class="mb-1"><span class="fw-bold">Branch Name : </span><span
															class="c-green"
															th:text="${item.payableBankDetails.bankBranch}"></span>
													</p>
													<p class="mb-1"><span class="fw-bold">Account Number : </span><span
															class="c-green"
															th:text="${item.payableBankDetails.bankAccountNumber}"></span>
													</p>
													<p class="mb-1"><span class="fw-bold">IFSC Code : </span><span
															class="c-green"
															th:text="${item.payableBankDetails.IFSCNumber}"></span>
													</p>
												</div>

												<div class="mb-1">
													<div>
														<input type="checkbox" id="paidToAcc2" name="paidToAccountId"
															class="form-check-input check-item-2"
															th:value="${item.id}" />
														<label for="paidToAcc" class="form-check-label"
															th:text="${content.donate.payment.bank.paid_confirmation}"></label>
													</div>
												</div>
												<div class="col-12 mt-2 mb-2"
													th:if="${#lists.size(interview.accounts)-1 != itemStat.index}">
													<b>OR</b>
												</div>
											</div>

											<div class="mt-1 mb-2">
												<div class="form-floating">
													<input type="file" class="form-control" id="file"
														th:field="*{files}" multiple required> <label for="file"
														th:text="${content.donate.payment.bank.file_label}"></label>
												</div>
											</div>
											<input type="hidden" name="actionName" id="actionName"
												th:value="'CONFIRM_PAYMENT'">
											<input type="hidden" name="paymentMethod" id="paymentMethod"
												th:value="'NETBANKING'">
											<div class="col-12 mb-2" th:if="${!#lists.isEmpty(interview.accounts)}">
												<button type="submit" class="btn btn-primary w-100" id="sub_bt2"
													disabled th:text="${content.donate.payment.bank.submit}"></button>
											</div>
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

		</div>
	</div>
</div>


<div th:fragment="donation_summary">
	<p class="h4 mb-2" th:text="${content.donate.payment.summary.title}"></p>
	<p class="mb-1"><span class="fw-bold" th:text="${content.donate.payment.summary.name}"></span><span class="c-green"
			th:text="${interview.firstName}"></span></p>
	<p class="mb-1"><span class="fw-bold" th:text="${content.donate.payment.summary.email}"></span><span class="c-green"
			th:text="${interview.email}"></span></p>
	<p class="mb-1"><span class="fw-bold" th:text="${content.donate.payment.summary.number}"></span><span
			class="c-green" th:text="${interview.dialCode}+${interview.contactNumber}"></span>
	</p>
	<p class="mb-1"><span class="fw-bold" th:text="${content.donate.payment.summary.amount}"></span><span
			class="c-green" th:text="'â‚¹ '+${interview.amount}"></span></p>
</div>